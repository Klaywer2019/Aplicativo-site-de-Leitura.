<!DOCTYPE html>
<html lang="pt-br">
<head>
    <link rel="manifest" href="manifest.json">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Estante RPG - Prote√ß√£o Celeste</title>
    
    <style>
        /* 1. RESET E SEGURAN√áA TOTAL */
        * { -webkit-user-select: none; user-select: none; -webkit-touch-callout: none; }
        input, select, textarea { -webkit-user-select: text; user-select: text; }

        body {
            background-color: #121212; color: white;
            font-family: 'Segoe UI', Tahoma, sans-serif;
            margin: 0; padding: 0; overflow-x: hidden; min-height: 100vh;
        }

        #barra-progresso {
            position: fixed; top: 0; left: 0; height: 4px;
            width: 0%; background: #55efc4; z-index: 3000;
            box-shadow: 0 0 10px #55efc4; transition: 0.2s;
        }

        /* 2. MENU LATERAL (SIDEBAR) */
        .sidebar {
            height: 100%; width: 0; position: fixed; z-index: 2000;
            top: 0; right: 0; background-color: #1e1e1e;
            overflow-x: hidden; transition: 0.5s; padding-top: 60px;
            border-left: 3px solid #6a1b9a; box-shadow: -5px 0 15px rgba(0,0,0,0.5);
        }

        .sidebar-content { display: flex; flex-direction: column; align-items: center; padding: 20px; }

        .card-rpg {
            background: #2d3436; border-radius: 20px; padding: 15px;
            width: 90%; margin: 10px 0; border: 1px solid #444; text-align: center;
        }

        /* 3. SISTEMA DE TELAS */
        #tela-entrada, #tela-cadastro, #tela-publicar, #tela-ban, #tela-avaliacao {
            display: flex; flex-direction: column; justify-content: center;
            align-items: center; height: 100vh; width: 100%; text-align: center;
            position: fixed; top: 0; left: 0; background: rgba(18,18,18,0.98); z-index: 4000;
        }

        #estante-principal { display: none; padding-bottom: 50px; }

        .perfil-avatar {
            width: 40px; height: 40px; background: linear-gradient(45deg, #6a1b9a, #a29bfe);
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            font-weight: bold; border: 2px solid #55efc4; cursor: pointer;
        }

        /* 4. ESTILO DOS ITENS E BOT√ÉO AVALIAR (CORES CELESTE DRAGON) */
        .item-container { margin: 30px auto; width: 85%; max-width: 400px; position: relative; }
        
        .item {
            width: 100%; padding: 25px; border-radius: 20px;
            text-decoration: none; font-weight: bold; color: white; display: block;
            box-sizing: border-box; text-shadow: 1px 1px 5px black;
        }
        
        .item::after {
            content: ""; position: absolute; bottom: -10px; left: -5%;
            width: 110%; height: 12px; background: linear-gradient(to bottom, #5d3a1a, #2b1a0a);
            border-radius: 4px; z-index: -1;
        }

        .livro { background: linear-gradient(135deg, #4B0082, #00FF00); }
        .video { background: linear-gradient(to right, #ff0000, #b20000); }
        .jogos { background: linear-gradient(45deg, #2d3436, #636e72); }

        .btn-avaliar {
            background: linear-gradient(45deg, #6a1b9a, #2e7d32); /* Roxo e Verde Escuro */
            color: white; border: 1px solid #a29bfe; padding: 7px 20px;
            border-radius: 12px; font-size: 0.85rem; cursor: pointer; margin-top: 12px;
            font-weight: bold; transition: 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.4);
        }
        .btn-avaliar:hover { transform: scale(1.05); filter: brightness(1.2); }

        /* ESTRELAS */
        .estrelas { font-size: 2.2rem; color: #444; margin: 15px 0; cursor: pointer; }
        .estrela-ativa { color: #f1c40f; text-shadow: 0 0 10px #f1c40f; }

        button {
            padding: 12px 25px; background: #6a1b9a; color: white;
            border: none; border-radius: 25px; cursor: pointer; font-weight: bold;
        }

        .campo-login {
            width: 80%; max-width: 300px; padding: 15px; margin: 10px 0;
            border-radius: 12px; border: 1px solid #444; background: #1e1e1e; color: white;
        }
    </style>
</head>
<body>

    <div id="barra-progresso"></div>

    <div id="tela-ban" style="display:none; color: red;">
        <h1 style="font-size: 2.5rem;">‚ö†Ô∏è BANIN-HAL INTERCEPTOU ‚ö†Ô∏è</h1>
        <p>A√ß√£o imoral, pl√°gio ou roubo de identidade detectado.</p>
        <p>ACESSO BLOQUEADO POR 48 HORAS.</p>
        <div id="timer-ban" style="font-size: 1.5rem; margin-top: 20px; color: white;"></div>
    </div>

    <div id="tela-avaliacao" style="display: none;">
        <h2 id="titulo-aval">Avaliar Trabalho</h2>
        <div class="estrelas" id="container-estrelas">
            <span onclick="votar(1)">‚òÖ</span><span onclick="votar(2)">‚òÖ</span><span onclick="votar(3)">‚òÖ</span><span onclick="votar(4)">‚òÖ</span><span onclick="votar(5)">‚òÖ</span>
        </div>
        <textarea id="feedback-texto" placeholder="Deixe um elogio ou dica para ajudar o autor..." class="campo-login" style="height: 100px;"></textarea>
        <button onclick="enviarAvaliacao()">Confirmar Apoio ‚≠ê</button>
        <button onclick="fecharAvaliacao()" style="background:#444; margin-top:10px;">Voltar</button>
    </div>

    <div id="menuLateral" class="sidebar">
        <div class="sidebar-content">
            <button onclick="fecharMenu()" style="background:none; color:#ff7675;">‚úñ Fechar</button>
            <div class="perfil-avatar" style="width:70px; height:70px; font-size:2rem; margin:15px;" id="avatar-grande">?</div>
            <h2 id="nome-perfil-menu">Her√≥i</h2>
            <div class="card-rpg">
                <p style="color:#888; font-size:0.8rem;">Ilha Atual:</p>
                <h3 id="cla-nome" style="color:#55efc4;">Iniciante üõ°Ô∏è</h3>
            </div>
            <div class="card-rpg">
                <h4>üíº √Årea de Trabalho</h4>
                <button onclick="abrirConversor()">Converter para JRG üõ†Ô∏è</button>
            </div>
        </div>
    </div>

    <div id="tela-entrada">
        <h1 style="margin-bottom: 20px;">üõ°Ô∏è Portal dos Cl√£s</h1>
        <button onclick="irParaCadastro()">Criar Conta de Autor</button>
        <button style="background: #333;" onclick="entrarConvidado()">Entrar como Convidado</button>
    </div>

    <div id="tela-cadastro" style="display: none;">
        <h2>Sua Identidade Real</h2>
        <input type="text" id="nome-autor" placeholder="Nome de Autor" class="campo-login">
        <button onclick="finalizarCadastro()">Registrar no Reino</button>
    </div>

    <div id="estante-principal">
        <div class="nav-topo" style="display:flex; justify-content:space-around; align-items: center; padding:15px; background:#1e1e1e;">
            <button onclick="sair()" style="background: #e74c3c; padding: 10px 20px;">üè† Sair</button>
            <button onclick="abrirPainelCriacao()" style="padding: 10px 20px;">‚ûï Publicar</button>
            <div class="perfil-avatar" id="user-icon" onclick="verPerfil()">?</div>
        </div>

        <div id="lista" style="text-align:center; padding-top: 20px;">
            <h3 style="color: #a29bfe;">üìñ Meus Livros</h3>
            <div class="item-container">
                <a href="#" class="item livro" onclick="mudarCla('Tenepress üè∞')">Celeste Dragon üî•üê≤</a>
                <button class="btn-avaliar" onclick="abrirAvaliacao('Celeste Dragon')">Avaliar ‚≠ê</button>
            </div>

            <h3 style="color: #ff7675; margin-top: 20px;">üé• Trailers</h3>
            <div class="item-container">
                <a href="#" class="item video" onclick="mudarCla('Gale üé•')">Trailers Oficiais üé¨</a>
                <button class="btn-avaliar" onclick="abrirAvaliacao('Trailers Oficiais')">Avaliar ‚≠ê</button>
            </div>

            <h3 style="color: #55efc4; margin-top: 20px;">üéÆ Mini-Jogos</h3>
            <div class="item-container">
                <a href="#" class="item jogos" onclick="mudarCla('Elgecon üïπÔ∏è')">Aventura no Reino üïπÔ∏è</a>
                <button class="btn-avaliar" onclick="abrirAvaliacao('Aventura no Reino')">Avaliar ‚≠ê</button>
            </div>
        </div>
    </div>

    <div id="tela-publicar" style="display: none;">
        <h2>Proteja seu Trabalho üõ°Ô∏è</h2>
        <input type="text" id="titulo-obra" placeholder="T√≠tulo Original" class="campo-login">
        <input type="text" id="link-obra" placeholder="Link Seguro" class="campo-login">
        <p style="font-size: 0.7rem; color: #888;">Ao postar, um selo criptografado ser√° gerado.</p>
        <button onclick="salvarObra()">Publicar e Proteger</button>
        <button onclick="fecharPainel()" style="background:#444;">Cancelar</button>
    </div>

    <script>
        const listaProibida = ["sexo", "porn", "hentai", "+18", "ofensa", "roubo", "plagio", "fake", "copia"];
        let notaAtual = 0;
        let obraSendoAvaliada = "";

        function verificarImoralidade(texto) {
            const t = texto.toLowerCase();
            return listaProibida.some(p => t.includes(p));
        }

        function aplicarCastigo() {
            const banAte = new Date().getTime() + (48 * 60 * 60 * 1000);
            localStorage.setItem('ban_tempo', banAte);
            location.reload();
        }

        function checarBan() {
            const banAte = localStorage.getItem('ban_tempo');
            if (banAte) {
                const agora = new Date().getTime();
                if (agora < banAte) {
                    document.body.innerHTML = "";
                    document.body.appendChild(document.getElementById('tela-ban'));
                    document.getElementById('tela-ban').style.display = 'flex';
                    let falta = banAte - agora;
                    document.getElementById('timer-ban').innerText = Math.floor(falta/(1000*60*60)) + "h restantes";
                    return true;
                } else { localStorage.removeItem('ban_tempo'); }
            }
            return false;
        }

        // L√ìGICA DE CADASTRO (ANTI-ROUBO DE IDENTIDADE)
        function finalizarCadastro() {
            const nome = document.getElementById('nome-autor').value.trim();
            const nomesProtegidos = ["Jemima keise", "Admin", "Mestre"];
            
            if (nomesProtegidos.includes(nome) && localStorage.getItem('autor_nome') !== nome) {
                alert("‚ö†Ô∏è Identidade Protegida! Voc√™ n√£o pode clamar este nome.");
                return;
            }
            if (verificarImoralidade(nome)) { aplicarCastigo(); return; }
            if (nome === "") return alert("Digite um nome!");
            
            localStorage.setItem('autor_nome', nome);
            mostrarEstante(nome);
        }

        // L√ìGICA DE PUBLICA√á√ÉO (CRIPTOGRAFIA)
        function salvarObra() {
            const t = document.getElementById('titulo-obra').value;
            const l = document.getElementById('link-obra').value;
            const autor = localStorage.getItem('autor_nome');

            if (verificarImoralidade(t) || verificarImoralidade(l)) { aplicarCastigo(); return; }

            if (t && l) {
                const selo = btoa(autor + "|" + t + "|" + new Date().getTime());
                alert("‚úÖ Registrado!\nüõ°Ô∏è Selo de Autoria: " + selo.substring(0,10) + "\nSeu trabalho est√° seguro no ranking!");
                fecharPainel();
            }
        }

        // AVALIA√á√ÉO
        function abrirAvaliacao(nome) {
            obraSendoAvaliada = nome;
            document.getElementById('titulo-aval').innerText = "Apoiando: " + nome;
            document.getElementById('tela-avaliacao').style.display = 'flex';
            votar(0);
        }
        function votar(n) {
            notaAtual = n;
            const stars = document.querySelectorAll('#container-estrelas span');
            stars.forEach((s, i) => { s.classList.toggle('estrela-ativa', i < n); });
        }
        function enviarAvaliacao() {
            const feedback = document.getElementById('feedback-texto').value;
            if (verificarImoralidade(feedback)) { aplicarCastigo(); return; }
            if (notaAtual === 0) return alert("D√™ seu voto de estrelas!");
            alert("Voto de Confian√ßa registrado com sucesso!");
            fecharAvaliacao();
        }

        // REFOR√áO ANTI-C√ìPIA (CTRL+C / CTRL+U)
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && (e.key === 'c' || e.key === 'u')) {
                alert("As leis de Celeste Dragon pro√≠bem a c√≥pia deste material!");
                e.preventDefault();
            }
        });

        // FUN√á√ïES B√ÅSICAS
        window.onload = () => { if (!checarBan()) { const n = localStorage.getItem('autor_nome'); if (n) mostrarEstante(n); } };
        function irParaCadastro() { document.getElementById('tela-entrada').style.display = 'none'; document.getElementById('tela-cadastro').style.display = 'flex'; }
        function entrarConvidado() { localStorage.setItem('autor_nome', 'Convidado'); mostrarEstante('Convidado'); }
        function mostrarEstante(n) { document.getElementById('tela-entrada').style.display = 'none'; document.getElementById('tela-cadastro').style.display = 'none'; document.getElementById('estante-principal').style.display = 'block'; document.getElementById('user-icon').innerText = n[0].toUpperCase(); }
        function verPerfil() { const n = localStorage.getItem('autor_nome') || "Her√≥i"; document.getElementById("nome-perfil-menu").innerText = n; document.getElementById("avatar-grande").innerText = n[0].toUpperCase(); document.getElementById("cla-nome").innerText = localStorage.getItem('cla_atual') || "Iniciante üõ°Ô∏è"; document.getElementById("menuLateral").style.width = "280px"; }
        function fecharMenu() { document.getElementById("menuLateral").style.width = "0"; }
        function mudarCla(c) { localStorage.setItem('cla_atual', c); }
        function abrirConversor() { let l = prompt("URL:"); if (l) alert("JRG Code: " + btoa(l).substring(0,8) + ".jrg"); }
        function abrirPainelCriacao() { document.getElementById('estante-principal').style.display = 'none'; document.getElementById('tela-publicar').style.display = 'flex'; }
        function fecharPainel() { document.getElementById('tela-publicar').style.display = 'none'; document.getElementById('estante-principal').style.display = 'block'; }
        function sair() { localStorage.clear(); location.reload(); }
        document.addEventListener('contextmenu', e => e.preventDefault());
        window.onscroll = () => { let s = (document.documentElement.scrollTop / (document.documentElement.scrollHeight - document.documentElement.clientHeight)) * 100; document.getElementById("barra-progresso").style.width = s + "%"; };
    </script>
</body>
</html>
