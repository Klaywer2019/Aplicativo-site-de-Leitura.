<!DOCTYPE html>
<html lang="pt-br">
<head>
    <link rel="manifest" href="manifest.json">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Estante RPG - Reino Protegido</title>
    
    <style>
        /* 1. RESET E SEGURAN√áA */
        * { -webkit-user-select: none; user-select: none; -webkit-touch-callout: none; }
        input, select, textarea { -webkit-user-select: text; user-select: text; }

        body {
            background-color: #121212; color: white;
            font-family: 'Segoe UI', Tahoma, sans-serif;
            margin: 0; padding: 0; overflow-x: hidden; min-height: 100vh;
        }

        /* BARRA DE PROGRESSO NEON */
        #barra-progresso {
            position: fixed; top: 0; left: 0; height: 4px;
            width: 0%; background: #55efc4; z-index: 3000;
            box-shadow: 0 0 10px #55efc4; transition: 0.2s;
        }

        /* 2. MENU LATERAL */
        .sidebar {
            height: 100%; width: 0; position: fixed; z-index: 2000;
            top: 0; right: 0; background-color: #1e1e1e;
            overflow-x: hidden; transition: 0.5s; padding-top: 60px;
            border-left: 3px solid #6a1b9a; box-shadow: -5px 0 15px rgba(0,0,0,0.5);
        }

        .sidebar-content { display: flex; flex-direction: column; align-items: center; padding: 20px; }

        .card-rpg {
            background: #2d3436; border-radius: 20px; padding: 15px;
            width: 90%; margin: 10px 0; border: 1px solid #444; text-align: center;
        }

        /* 3. TELAS */
        #tela-entrada, #tela-cadastro, #tela-publicar, #tela-ban {
            display: flex; flex-direction: column; justify-content: center;
            align-items: center; height: 100vh; width: 100%; text-align: center;
        }

        #estante-principal { display: none; padding-bottom: 50px; }

        .perfil-avatar {
            width: 40px; height: 40px; background: linear-gradient(45deg, #6a1b9a, #a29bfe);
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            font-weight: bold; border: 2px solid #55efc4; cursor: pointer;
        }

        /* 4. ITENS DA ESTANTE */
        .item {
            width: 80%; max-width: 350px; padding: 25px; border-radius: 20px;
            text-decoration: none; font-weight: bold; color: white; position: relative;
            margin: 15px auto; display: block;
        }
        .item::after {
            content: ""; position: absolute; bottom: -15px; left: -5%;
            width: 110%; height: 15px; background: linear-gradient(to bottom, #5d3a1a, #2b1a0a);
            border-radius: 4px;
        }
        .livro { background: linear-gradient(135deg, #4B0082, #00FF00); }
        .video { background: linear-gradient(to right, #ff0000, #b20000); }

        button {
            padding: 12px 25px; background: #6a1b9a; color: white;
            border: none; border-radius: 25px; cursor: pointer; font-weight: bold;
        }

        .campo-login {
            width: 80%; max-width: 300px; padding: 15px; margin: 10px 0;
            border-radius: 12px; border: 1px solid #444; background: #1e1e1e; color: white;
        }
    </style>
</head>
<body>

    <div id="barra-progresso"></div>

    <div id="tela-ban" style="display:none; background: black; color: red; position: fixed; z-index: 9999;">
        <h1 style="font-size: 2.5rem;">‚ö†Ô∏è BANIN-HAL INTERCEPTOU ‚ö†Ô∏è</h1>
        <p>Voc√™ tentou introduzir algo impuro ou ofensivo no reino.</p>
        <p>ACESSO BLOQUEADO POR 48 HORAS.</p>
        <div id="timer-ban" style="font-size: 1.5rem; margin-top: 20px; color: white;"></div>
    </div>

    <div id="menuLateral" class="sidebar">
        <div class="sidebar-content">
            <button onclick="fecharMenu()" style="background:none; color:#ff7675;">‚úñ Fechar</button>
            <div class="perfil-avatar" style="width:70px; height:70px; font-size:2rem; margin:15px;" id="avatar-grande">?</div>
            <h2 id="nome-perfil-menu">Her√≥i</h2>
            
            <div class="card-rpg">
                <p style="color:#888; font-size:0.8rem;">Ilha Atual:</p>
                <h3 id="cla-nome" style="color:#55efc4;">Iniciante üõ°Ô∏è</h3>
            </div>

            <div class="card-rpg">
                <h4>üíº √Årea de Trabalho</h4>
                <button onclick="alert('Abrindo rascunhos...')">Meus Projetos</button>
                <button style="margin-top:10px; background:#444;" onclick="abrirConversor()">Converter para JRG üõ†Ô∏è</button>
            </div>
        </div>
    </div>

    <div id="tela-entrada">
        <h1>üõ°Ô∏è Portal dos Cl√£s</h1>
        <button onclick="irParaCadastro()">Criar Conta de Autor</button>
        <button style="background: #333;" onclick="entrarConvidado()">Entrar como Convidado</button>
    </div>

    <div id="tela-cadastro" style="display: none;">
        <h2>Inicie sua Jornada</h2>
        <input type="text" id="nome-autor" placeholder="Nome de Autor" class="campo-login">
        <button onclick="finalizarCadastro()">Concluir Cadastro</button>
        <p onclick="location.reload()" style="cursor:pointer; color:#888;">Voltar</p>
    </div>

    <div id="estante-principal">
        <div class="nav-topo" style="display:flex; justify-content:space-around; padding:15px; background:#1e1e1e;">
            <button onclick="sair()">üè† Sair</button>
            <button onclick="abrirPainelCriacao()">‚ûï Publicar</button>
            <div class="perfil-avatar" id="user-icon" onclick="verPerfil()">?</div>
        </div>

        <div id="lista" style="text-align:center;">
            <h3>üìñ Meus Livros</h3>
            <div id="secao-livros">
                <a href="#" class="item livro" onclick="mudarCla('Tenepress üè∞')">Celeste Dragon üî•üê≤</a>
            </div>
            <h3>üé• Trailers</h3>
            <div id="secao-videos">
                <a href="#" class="item video" onclick="mudarCla('Gale üé•')">Trailers Oficiais üé¨</a>
            </div>
        </div>
    </div>

    <div id="tela-publicar" style="display: none;">
        <h2>Novo Trabalho ‚úçÔ∏è</h2>
        <input type="text" id="titulo-obra" placeholder="T√≠tulo" class="campo-login">
        <input type="text" id="link-obra" placeholder="Link/URL" class="campo-login">
        <button onclick="salvarObra()">Postar Agora</button>
        <button onclick="fecharPainel()" style="background:#444;">Cancelar</button>
    </div>

    <script>
        // LISTA DE TERMOS PROIBIDOS (+18 E OFENSIVOS)
        const listaProibida = ["palavrao1", "sexo", "hentai", "porn", "ofensa", "corno", "morra"];

        function verificarImoralidade(texto) {
            const t = texto.toLowerCase();
            return listaProibida.some(p => t.includes(p));
        }

        function aplicarCastigo() {
            const banAte = new Date().getTime() + (48 * 60 * 60 * 1000);
            localStorage.setItem('ban_tempo', banAte);
            location.reload();
        }

        function checarBan() {
            const banAte = localStorage.getItem('ban_tempo');
            if (banAte) {
                const agora = new Date().getTime();
                if (agora < banAte) {
                    document.body.innerHTML = "";
                    document.getElementById('tela-ban').style.display = 'flex';
                    document.body.appendChild(document.getElementById('tela-ban'));
                    let falta = banAte - agora;
                    document.getElementById('timer-ban').innerText = Math.floor(falta/(1000*60*60)) + "h restantes";
                    return true;
                } else { localStorage.removeItem('ban_tempo'); }
            }
            return false;
        }

        // BARRA DE PROGRESSO
        window.onscroll = function() {
            let winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            let height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            let scrolled = (winScroll / height) * 100;
            document.getElementById("barra-progresso").style.width = scrolled + "%";
        };

        // FUN√á√ïES DE LOGIN
        window.onload = function() {
            if (!checarBan()) {
                const nome = localStorage.getItem('autor_nome');
                if (nome) mostrarEstante(nome);
            }
        };

        function finalizarCadastro() {
            const nome = document.getElementById('nome-autor').value;
            if (verificarImoralidade(nome)) { aplicarCastigo(); return; }
            if (nome) { localStorage.setItem('autor_nome', nome); mostrarEstante(nome); }
        }

        function entrarConvidado() { localStorage.setItem('autor_nome', 'Convidado'); mostrarEstante('Convidado'); }

        function mostrarEstante(nome) {
            document.getElementById('tela-entrada').style.display = 'none';
            document.getElementById('tela-cadastro').style.display = 'none';
            document.getElementById('estante-principal').style.display = 'block';
            document.getElementById('user-icon').innerText = nome[0].toUpperCase();
        }

        // SIDEBAR
        function verPerfil() {
            const nome = localStorage.getItem('autor_nome') || "Her√≥i";
            document.getElementById("nome-perfil-menu").innerText = nome;
            document.getElementById("avatar-grande").innerText = nome[0].toUpperCase();
            document.getElementById("cla-nome").innerText = localStorage.getItem('cla_atual') || "Iniciante üõ°Ô∏è";
            document.getElementById("menuLateral").style.width = "280px";
        }
        function fecharMenu() { document.getElementById("menuLateral").style.width = "0"; }
        function mudarCla(c) { localStorage.setItem('cla_atual', c); }

        // CONVERSOR
        function abrirConversor() {
            let link = prompt("URL para converter em JRG:");
            if (link) alert("Sucesso! C√≥digo gerado: " + btoa(link).substring(0,8) + ".jrg");
        }

        // PUBLICAR COM FILTRO
        function abrirPainelCriacao() { 
            document.getElementById('estante-principal').style.display = 'none';
            document.getElementById('tela-publicar').style.display = 'flex';
        }
        function fecharPainel() { 
            document.getElementById('tela-publicar').style.display = 'none';
            document.getElementById('estante-principal').style.display = 'block';
        }
        function salvarObra() {
            const t = document.getElementById('titulo-obra').value;
            const l = document.getElementById('link-obra').value;
            if (verificarImoralidade(t) || verificarImoralidade(l)) {
                aplicarCastigo();
                return;
            }
            if (t && l) {
                alert("Obra enviada para revis√£o do Reino!");
                fecharPainel();
            }
        }

        function sair() { localStorage.clear(); location.reload(); }
        document.addEventListener('contextmenu', e => e.preventDefault());
    </script>
</body>
</html>
