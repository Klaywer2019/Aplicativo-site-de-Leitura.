<!DOCTYPE html>
<html lang="pt-br">
<head>
    <link rel="manifest" href="manifest.json">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Estante RPG - Portal dos Cl√£s</title>
    
    <style>
        /* 1. RESET E SEGURAN√áA */
        * { -webkit-user-select: none; user-select: none; -webkit-touch-callout: none; }
        input, select, textarea { -webkit-user-select: text; user-select: text; }

        body {
            background-color: #121212;
            color: white;
            font-family: 'Segoe UI', sans-serif;
            margin: 0; padding: 0;
            overflow-x: hidden;
        }

        /* BARRA DE PROGRESSO NEON */
        #progresso-leitura {
            position: fixed; top: 0; left: 0;
            height: 4px; background: #55efc4;
            width: 0%; z-index: 1001; transition: 0.2s;
            box-shadow: 0 0 10px #55efc4;
        }

        /* MENU LATERAL (SIDEBAR) */
        .sidebar {
            height: 100%; width: 0; position: fixed;
            z-index: 2000; top: 0; right: 0;
            background-color: #1e1e1e; overflow-x: hidden;
            transition: 0.5s; padding-top: 60px;
            border-left: 3px solid #6a1b9a;
        }

        .sidebar-content { padding: 20px; text-align: center; }

        .area-trabalho-arredondada {
            background: #2d3436; border-radius: 20px;
            padding: 15px; margin: 20px 0; border: 1px solid #444;
        }

        /* BOT√ïES E ESTILOS GERAIS */
        button {
            padding: 12px 25px; background: #6a1b9a; color: white;
            border: none; border-radius: 25px; cursor: pointer; font-weight: bold;
        }

        .nav-topo {
            display: flex; justify-content: space-around; align-items: center;
            background: #1e1e1e; padding: 15px; position: sticky; top: 0; z-index: 100;
        }

        .perfil-avatar {
            width: 45px; height: 45px; background: linear-gradient(45deg, #6a1b9a, #a29bfe);
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            cursor: pointer; border: 2px solid #55efc4;
        }

        /* ESTANTE DE MADEIRA */
        #lista { display: flex; flex-direction: column; align-items: center; gap: 25px; padding: 20px; }
        .item {
            width: 85%; max-width: 350px; padding: 25px; border-radius: 20px;
            text-decoration: none; font-weight: bold; color: white; position: relative;
        }
        .item::after {
            content: ""; position: absolute; bottom: -15px; left: -5%;
            width: 110%; height: 15px; background: linear-gradient(to bottom, #5d3a1a, #2b1a0a);
            border-radius: 4px;
        }

        .livro { background: linear-gradient(135deg, #4B0082, #00FF00); }
        .video { background: linear-gradient(to right, #ff0000, #b20000); }
        .jogo { background: linear-gradient(45deg, #2d3436, #636e72); }

        /* BAN TELA */
        #tela-ban {
            display: none; position: fixed; top: 0; left: 0;
            width: 100%; height: 100%; background: black;
            color: red; z-index: 9999; justify-content: center;
            align-items: center; flex-direction: column; text-align: center;
        }
    </style>
</head>
<body>

    <div id="progresso-leitura"></div>

    <div id="tela-ban">
        <h1>‚ö†Ô∏è VOC√ä FOI BANIDO ‚ö†Ô∏è</h1>
        <p>O vil√£o <strong>Banin-hal</strong> dominou sua conta.</p>
        <p>Motivo: Desobedi√™ncia √†s regras do reino.</p>
        <p id="tempo-restante"></p>
    </div>

    <div id="sidebarMenu" class="sidebar">
        <div class="sidebar-content">
            <span onclick="toggleMenu()" style="color:red; float:left; cursor:pointer;">‚úñ Fechar</span>
            <div class="perfil-avatar" style="width:70px; height:70px; margin: 0 auto; font-size: 1.5rem;" id="avatar-lateral">?</div>
            <h2 id="nome-perfil">Her√≥i</h2>
            <p id="cla-badge" style="color:#55efc4; font-weight:bold;">Cl√£: ?</p>
            
            <div class="area-trabalho-arredondada">
                <h4>üíº √Årea de Trabalho</h4>
                <p style="font-size:0.8rem;">Trabalhos salvos: <span id="count-obras">0</span></p>
                <button onclick="alert('Abrindo seus arquivos privados...')">Acessar</button>
            </div>

            <div class="area-trabalho-arredondada">
                <h4>üèÜ Conquistas</h4>
                <p id="conquista-txt" style="font-size:0.7rem;">Leia para ganhar XP!</p>
            </div>

            <div class="area-trabalho-arredondada">
                <h4>üõ†Ô∏è Dev Tool</h4>
                <button style="font-size:0.7rem; background:#333;" onclick="abrirConversor()">CONVERTER PARA URL/JRG</button>
            </div>
        </div>
    </div>

    <div id="tela-entrada" style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh;">
        <h1>üõ°Ô∏è Portal dos Cl√£s</h1>
        <button onclick="irParaCadastro()">Criar Conta</button>
        <button style="background:#333" onclick="entrarConvidado()">Convidado</button>
    </div>

    <div id="tela-cadastro" style="display:none;">
        <h2>Inicie sua Jornada</h2>
        <input type="text" id="reg-nome" placeholder="Nome de Autor" class="campo-login">
        <button onclick="registrar()">Concluir</button>
    </div>

    <div id="estante-principal" style="display:none;">
        <div class="nav-topo">
            <button onclick="sair()" class="btn-nav">üè† Sair</button>
            <button onclick="abrirPainelCriacao()" class="btn-nav">‚ûï Publicar</button>
            <div class="perfil-avatar" id="user-icon" onclick="toggleMenu()">?</div>
        </div>

        <div id="lista">
            <h3 style="color:#a29bfe;">üìñ Meus Livros</h3>
            <a href="celeste.html" class="item livro" onclick="ganharXP('leitor')">Celeste Dragon üî•üê≤</a>
            
            <h3 style="color:#ff7675;">üé• Trailers</h3>
            <a href="video1.html" class="item video" onclick="ganharXP('espectador')">Trailers Oficiais üé¨</a>

            <h3 style="color:#55efc4;">üéÆ Mini-Jogos</h3>
            <a href="jogos.html" class="item jogo" onclick="ganharXP('jogador')">Aventura no Reino üïπÔ∏è</a>
        </div>
    </div>

    <script>
        // LISTA NEGRA E MODERA√á√ÉO
        const listaNegra = ["ofensa1", "ofensa2"]; 
        
        // SISTEMA DE BANIN-HAL
        function checarBan() {
            const banAte = localStorage.getItem('ban_time');
            if (banAte) {
                const agora = new Date().getTime();
                if (agora < banAte) {
                    document.body.innerHTML = ""; // Limpa tudo
                    document.getElementById('tela-ban').style.display = 'flex';
                    document.body.appendChild(document.getElementById('tela-ban'));
                    const horas = Math.ceil((banAte - agora) / (1000 * 60 * 60));
                    document.getElementById('tempo-restante').innerText = "Libera√ß√£o em: " + horas + " horas.";
                } else {
                    localStorage.removeItem('ban_time');
                }
            }
        }

        // BARRA DE PROGRESSO
        window.onscroll = function() {
            let winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            let height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            let scrolled = (winScroll / height) * 100;
            document.getElementById("progresso-leitura").style.width = scrolled + "%";
        };

        // GEST√ÉO DE CL√ÉS E XP
        function ganharXP(tipo) {
            let xp = parseInt(localStorage.getItem('xp') || "0") + 10;
            localStorage.setItem('xp', xp);
            localStorage.setItem('ultimo_cla', tipo);
            alert("Voc√™ ganhou 10 XP no cl√£ " + tipo + "!");
        }

        // MENU LATERAL
        function toggleMenu() {
            const menu = document.getElementById("sidebarMenu");
            const nome = localStorage.getItem('autor_nome') || "Her√≥i";
            const cla = localStorage.getItem('ultimo_cla') || "leitor";
            
            const claNomes = { leitor: "Tenepress üè∞", jogador: "Elgecon üïπÔ∏è", espectador: "Gale üé•" };
            
            document.getElementById('nome-perfil').innerText = nome;
            document.getElementById('cla-badge').innerText = "Cl√£: " + (claNomes[cla]);
            document.getElementById('avatar-lateral').innerText = nome[0].toUpperCase();
            
            menu.style.width = menu.style.width === "280px" ? "0" : "280px";
        }

        function abrirConversor() {
            const url = prompt("Cole o link ou nome do arquivo para converter para JRG:");
            if(url) alert("Convertido com sucesso: " + btoa(url) + ".jrg");
        }

        // LOGIN E PERSIST√äNCIA
        window.onload = function() {
            checarBan();
            const nome = localStorage.getItem('autor_nome');
            if (nome) logar(nome);
        };

        function registrar() {
            const nome = document.getElementById('reg-nome').value;
            if (listaNegra.some(o => nome.includes(o))) {
                alert("Banin-hal detectou palavras proibidas! Banimento de 48h aplicado.");
                const banTime = new Date().getTime() + (48 * 60 * 60 * 1000);
                localStorage.setItem('ban_time', banTime);
                location.reload();
                return;
            }
            localStorage.setItem('autor_nome', nome);
            logar(nome);
        }

        function logar(nome) {
            document.getElementById('tela-entrada').style.display = 'none';
            document.getElementById('tela-cadastro').style.display = 'none';
            document.getElementById('estante-principal').style.display = 'block';
            document.getElementById('user-icon').innerText = nome[0].toUpperCase();
        }

        function sair() {
            localStorage.removeItem('autor_nome');
            location.reload();
        }

        function irParaCadastro() {
            document.getElementById('tela-entrada').style.display = 'none';
            document.getElementById('tela-cadastro').style.display = 'flex';
        }
        
        // Trava de c√≥pia
        document.addEventListener('contextmenu', e => e.preventDefault());
    </script>
</body>
</html>
