<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>SalÃ£o de Tesouros - Reino Celeste</title>
    <style>
        body { background: #0a0a0a; color: white; font-family: sans-serif; padding: 20px; }
        .grid-tesouros { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .card-tesouro { background: #1a1a1a; border: 1px solid #6a1b9a; padding: 15px; border-radius: 10px; }
        .user-tag { color: #55efc4; font-weight: bold; }
        iframe { width: 100%; height: 200px; background: white; border-radius: 5px; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>ðŸ’Ž RelÃ­quias da Forja</h1>
    <button onclick="window.location.href='index.html'">Voltar ao InÃ­cio</button>
    <hr>
    <div id="lista" class="grid-tesouros"></div>

    <script>
        async function carregarTesouros() {
            const resp = await fetch('http://127.0.0.1:5000/listar_tesouros');
            const dados = await resp.json();
            const divLista = document.getElementById('lista');

            dados.forEach(t => {
                const card = document.createElement('div');
                card.className = 'card-tesouro';
                card.innerHTML = `
                    <p>Criador: <span class="user-tag">${t.usuario}</span></p>
                    <small>Forjado em: ${t.data}</small>
                    <iframe srcdoc="${t.codigo.replace('HTML: ', '').split(' | CSS: ')[0]}<style>${t.codigo.split(' | CSS: ')[1]}</style>"></iframe>
                `;
                divLista.appendChild(card);
            });
        }
        window.onload = carregarTesouros;
    </script>
</body>
</html>
