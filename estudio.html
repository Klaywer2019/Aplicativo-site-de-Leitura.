<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Est√∫dio de Trailers - Reino Celeste</title>
    <style>
        * { box-sizing: border-box; }
        body { 
            background-color: #0a0a0a; color: white; 
            font-family: 'Segoe UI', sans-serif; margin: 0; 
            display: flex; flex-direction: column; height: 100vh;
            overflow: hidden;
        }

        /* --- NOVO DESIGN DE ALERTA R√öNICO --- */
        #overlay-celeste {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 9998; backdrop-filter: blur(5px);
        }
        #alerta-celeste {
            display: none; position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%); z-index: 9999;
            width: 85%; max-width: 320px; background: #1a1a1a;
            border: 2px solid #6a1b9a; border-radius: 20px; padding: 25px;
            text-align: center; box-shadow: 0 0 30px rgba(106, 27, 154, 0.6);
            animation: surgir 0.3s ease-out;
        }
        @keyframes surgir {
            from { opacity: 0; transform: translate(-50%, -60%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }
        .btn-alerta-ok {
            background: linear-gradient(45deg, #6a1b9a, #4b0082);
            color: white; border: none; padding: 12px; width: 100%;
            border-radius: 12px; cursor: pointer; font-weight: bold; margin-top: 15px;
        }

        /* HEADER DO EST√öDIO */
        .header-estudio {
            background: #161b22; padding: 15px 20px;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 2px solid #6a1b9a;
        }

        /* √ÅREA PRINCIPAL (PLAYER) */
        .workspace {
            flex: 1; display: flex; flex-direction: column;
            align-items: center; justify-content: center; padding: 20px;
            background: radial-gradient(circle, #1a1a1a 0%, #0a0a0a 100%);
        }

        .video-wrapper {
            width: 100%; max-width: 800px; position: relative;
            box-shadow: 0 0 30px rgba(106, 27, 154, 0.3); border-radius: 12px;
            overflow: hidden; background: #000;
        }

        video { width: 100%; display: block; }

        /* PAINEL DE CONTROLE */
        .painel-edicao {
            background: #161b22; padding: 20px;
            border-top: 2px solid #2e7d32;
        }

        .controles-grade {
            display: grid; grid-template-columns: repeat(3, 1fr);
            gap: 12px; max-width: 1000px; margin: auto;
        }

        .btn-ferramenta {
            background: #21262d; color: #55efc4; border: 1px solid #30363d;
            padding: 12px; border-radius: 8px; cursor: pointer;
            font-weight: bold; font-size: 0.8rem; transition: 0.2s;
            display: flex; flex-direction: column; align-items: center; gap: 5px;
        }

        .btn-ferramenta:hover { background: #30363d; border-color: #a29bfe; }

        /* MODAL DE FERRAMENTAS */
        #painel-reliquias {
            display: none; position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%); width: 90%; max-width: 350px;
            background: #1e1e1e; border: 2px solid #6a1b9a; border-radius: 20px;
            padding: 20px; z-index: 5000; box-shadow: 0 0 40px rgba(0,0,0,0.8);
        }

        .item-lista {
            background: #2d3436; margin: 8px 0; padding: 12px;
            border-radius: 10px; cursor: pointer; display: flex;
            justify-content: space-between; border: 1px solid #444;
        }

        .item-lista:hover { border-color: #55efc4; background: #353b48; }

        .custom-upload {
            background: linear-gradient(45deg, #6a1b9a, #4b0082);
            color: white; padding: 12px 25px; border-radius: 25px;
            cursor: pointer; display: inline-block; font-weight: bold;
            margin-bottom: 15px;
        }

        .btn-save {
            background: #2e7d32; color: white; border: none;
            padding: 10px 20px; border-radius: 20px; font-weight: bold;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div id="overlay-celeste"></div>
    <div id="alerta-celeste">
        <h3 id="alerta-titulo" style="color:#55efc4; margin-top:0;">üõ°Ô∏è Mensagem</h3>
        <p id="alerta-texto" style="color:#ccc; font-size: 0.9rem;"></p>
        <button class="btn-alerta-ok" onclick="fecharAlerta()">Entendido</button>
    </div>

    <div class="header-estudio">
        <button onclick="window.location.href='index.html'" style="background:none; border:none; color:#aaa; cursor:pointer;">‚¨Ö Voltar ao Reino</button>
        <h3 style="margin:0; color:#55efc4;">üé¨ Studio Pro <span style="font-size: 0.6rem; background:#444; padding:2px 4px; border-radius:4px;">PRO</span></h3>
        <button class="btn-save" onclick="exportarVideoComoURL()">Exportar ‚¨áÔ∏è</button>
    </div>

    <div class="workspace">
        <div class="upload-section">
            <label for="importar-video" class="custom-upload">üì• Importar M√≠dia</label>
            <input type="file" id="importar-video" accept="video/*" style="display: none;">
            <button onclick="carregarVideoPorLink()" style="background:#444; color:white; border:none; padding:10px 15px; border-radius:20px; font-weight:bold; margin-left:10px;">üîó Link URL</button>
        </div>

        <div class="video-wrapper">
            <video id="main-player" controls></video>
        </div>
    </div>

    <div id="painel-reliquias">
        <h3 id="titulo-painel" style="color:#a29bfe; margin-top:0;">üìÇ Biblioteca</h3>
        <div id="conteudo-painel"></div>
        <button onclick="fecharPainel()" style="width:100%; margin-top:15px; background:#d63031; color:white; border:none; padding:10px; border-radius:10px;">Fechar</button>
    </div>

    <div class="painel-edicao">
        <div class="controles-grade">
            <button class="btn-ferramenta" onclick="abrirTesoura()">
                <span>üå™Ô∏è</span> Cortar (Tesoura)
            </button>
            <button class="btn-ferramenta" onclick="abrirPainel('memes')">
                <span>üß™</span> Ba√∫ de Memes
            </button>
            <button class="btn-ferramenta" onclick="abrirPainel('sons')">
                <span>üåå</span> Sons Mist√©rio
            </button>
            <button class="btn-ferramenta" onclick="abrirPainel('filtros')">
                <span>üìú</span> Mem√≥ria Antiga
            </button>
            <button class="btn-ferramenta" onclick="abrirPainel('armazenamento')">
                <span>üî•</span> Armaz√©m
            </button>
            <button class="btn-ferramenta" onclick="location.reload()" style="color: #ff7675;">
                <span>‚ùå</span> Limpar
            </button>
        </div>
    </div>

    <script>
        const video = document.getElementById('main-player');
        const upload = document.getElementById('importar-video');
        const painel = document.getElementById('painel-reliquias');

        // FUN√á√ÉO DO NOVO ALERTA
        function exibirAlerta(titulo, texto) {
            document.getElementById('alerta-titulo').innerText = titulo;
            document.getElementById('alerta-texto').innerText = texto;
            document.getElementById('overlay-celeste').style.display = 'block';
            document.getElementById('alerta-celeste').style.display = 'block';
        }

        function fecharAlerta() {
            document.getElementById('overlay-celeste').style.display = 'none';
            document.getElementById('alerta-celeste').style.display = 'none';
        }

        const biblioteca = {
            memes: [
                { nome: "üòÇ Risada do Zap", tipo: "V√≠deo" },
                { nome: "ü§î Confused Lady", tipo: "Imagem" },
                { nome: "üê± Gato Dan√ßando", tipo: "V√≠deo" }
            ],
            sons: [
                { nome: "üëª Suspense/Mist√©rio", icon: "üéª" },
                { nome: "ü§£ Som de Pateta", icon: "ü§°" },
                { nome: "üí• Explos√£o", icon: "üß®" }
            ],
            filtros: [
                { nome: "Preto e Branco", css: "grayscale(1)" },
                { nome: "Vis√£o Noturna", css: "hue-rotate(90deg) green" },
                { nome: "Cinema Antigo", css: "sepia(1)" }
            ]
        };

        upload.addEventListener('change', function() {
            const file = this.files[0];
            if (file) {
                video.src = URL.createObjectURL(file);
                video.play();
            }
        });

        function carregarVideoPorLink() {
            const link = prompt("Cole aqui a URL do v√≠deo ou meme:");
            if (link) {
                video.src = link;
                video.play();
            }
        }

        function exportarVideoComoURL() {
            if (!video.src) {
                exibirAlerta("‚ùå Erro", "N√£o h√° v√≠deo para exportar!");
                return;
            }
            const email = localStorage.getItem('usuarioEmail') || "visitante";
            localStorage.setItem(email + "_video_projeto", video.src);
            exibirAlerta("‚ú® Sucesso", "Sua obra foi convertida e guardada no seu Tesouro!");
        }

        function abrirPainel(tipo) {
            const titulo = document.getElementById('titulo-painel');
            const conteudo = document.getElementById('conteudo-painel');
            conteudo.innerHTML = "";
            painel.style.display = 'block';

            if (tipo === 'memes') {
                titulo.innerText = "üß™ Ba√∫ de Memes";
                biblioteca.memes.forEach(m => {
                    conteudo.innerHTML += `<div class="item-lista" onclick="exibirAlerta('Meme','Meme adicionado √† linha do tempo!')">${m.nome} <span>${m.tipo}</span></div>`;
                });
            } else if (tipo === 'sons') {
                titulo.innerText = "üåå Sons de Mist√©rio";
                biblioteca.sons.forEach(s => {
                    conteudo.innerHTML += `<div class="item-lista" onclick="exibirAlerta('√Åudio','Tocando pr√©via do som...')">${s.icon} ${s.nome}</div>`;
                });
            } else if (tipo === 'filtros') {
                titulo.innerText = "üìú Filtros de Mem√≥ria";
                biblioteca.filtros.forEach(f => {
                    conteudo.innerHTML += `<div class="item-lista" onclick="video.style.filter='${f.css}'">‚ú® ${f.nome}</div>`;
                });
            } else if (tipo === 'armazenamento') {
                titulo.innerText = "üî• Armaz√©m de M√≠dia";
                conteudo.innerHTML = `<div class="item-lista">V√≠deo Atual: ${video.src ? 'Carregado ‚úÖ' : 'Vazio ‚ùå'}</div>`;
            }
        }

        function abrirTesoura() {
            exibirAlerta("üå™Ô∏è Tesoura", "Selecione o ponto de corte na linha do tempo!");
        }

        function fecharPainel() { painel.style.display = 'none'; }
    </script>
</body>
</html>
